<!DOCTYPE html>
<html lang="zh-CN">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>ç®€çº¦è®°è´¦</title>
<style>
*{margin:0;padding:0;box-sizing:border-box;font-family:system-ui, sans-serif}
body{background:#f7f8fa;padding-bottom:80px}
.header{
  background: linear-gradient(135deg, #4A88FF, #5E72FF);
  color:#fff;
  padding:22px 20px;
  border-radius:0 0 26px;
  display:flex;align-items:center;gap:14px;
}
.header-img{
  width:46px;height:46px;border-radius:14px;object-fit:cover;
}
.header-text{flex:1}
.header h2{font-size:22px;margin-bottom:2px}
.header p{font-size:14px;opacity:.9}
.total-row{
  display:flex;gap:10px;margin-top:16px;padding:0 12px;
}
.total-box{
  flex:1;background:#fff;padding:16px;border-radius:18px;
  text-align:center;box-shadow:0 2px 8px rgba(0,0,0,0.04);
}
.total-box p{font-size:13px;color:#666;margin-bottom:4px}
.total-box .num{
  font-size:20px;font-weight:600;color:#222;
}
.income{color:#29CC7F}
.expense{color:#FF5E5E}
.card{
  background:#fff;margin:12px;border-radius:20px;padding:22px;
  box-shadow:0 2px 10px rgba(0,0,0,0.03);
}
.card-title{
  font-size:17px;font-weight:600;margin-bottom:16px;color:#222;
}
input{
  width:100%;padding:14px 16px;border:1px solid #eaeef5;
  border-radius:14px;margin-bottom:10px;font-size:15px;background:#fafbfc;
}
.btn{
  width:100%;padding:16px;border:none;
  border-radius:16px;font-size:16px;font-weight:600;color:#fff;
  transition:0.2s;
}
.btn:active{opacity:0.82;transform:scale(0.97)}
.btn-green{background:#29CC7F}
.btn-red{background:#FF5E5E}
.btn-orange{background:#FF9A3D}
.btn-blue{background:#4A88FF}
.flex{display:flex;gap:10px}
.flex>button{flex:1}
.item{
  display:flex;justify-content:space-between;align-items:center;
  padding:12px 0;border-bottom:1px solid #f2f3f7;
}
.item:last-child{border-bottom:none}
.item .name{font-size:16px;color:#222}
.item .money{font-weight:600;font-size:16px}
.del{
  color:#FF5E5E;font-size:13px;padding:6px 10px;
  border:none;background:#fff0f0;border-radius:10px;
}
.del:active{opacity:0.7}
.week-bar{
  display:grid;grid-template-columns:repeat(7,1fr);gap:6px;
  text-align:center;font-size:12px;color:#999;margin-bottom:6px;
}
.calendar-header{
  display:flex;align-items:center;justify-content:space-between;
  margin-bottom:10px;
}
.calendar-header button{
  background:#f1f5ff;border:none;width:36px;height:36px;
  border-radius:12px;color:#4A88FF;font-size:16px;
}
.calendar{
  display:grid;grid-template-columns:repeat(7,1fr);gap:6px;
}
.calendar-day{
  aspect-ratio:1/1;
  display:flex;flex-direction:column;
  align-items:center;justify-content:center;
  border-radius:10px;background:#fafbfc;
  font-size:13px;
}
.calendar-day.today{
  background:#e5efff;color:#4A88FF;font-weight:600;
}
.calendar-day .in{color:#29CC7F;font-size:10px;line-height:1.2}
.calendar-day .out{color:#FF5E5E;font-size:10px;line-height:1.2}
.tab{
  position:fixed;bottom:0;left:0;right:0;
  height:70px;background:#fff;display:flex;border-top:1px solid #eef1f7;
}
.tab-item{
  flex:1;display:flex;flex-direction:column;
  align-items:center;justify-content:center;font-size:12px;color:#777;
  gap:4px;
}
.tab-item.active{color:#4A88FF}
.icon{font-size:22px;line-height:1}
.page{display:none}
.page.active{display:block}
.empty{text-align:center;padding:20px 0;color:#999}
/* å¼¹çª— */
.modal{
  position:fixed;top:0;left:0;width:100%;height:100%;
  background:rgba(0,0,0,0.4);display:none;
  align-items:center;justify-content:center;z-index:999;
}
.modal.show{display:flex}
.modal-box{
  background:#fff;width:85%;max-width:320px;
  border-radius:22px;padding:24px;
  box-shadow:0 10px 30px rgba(0,0,0,0.15);
}
.modal-title{
  font-size:18px;font-weight:600;text-align:center;margin-bottom:16px}
.modal-content{
  font-size:14px;line-height:1.7;color:#333;margin-bottom:20px}
.modal-content div{margin-bottom:6px}
.modal-btn{
  width:100%;padding:14px;border-radius:14px;
  background:#4A88FF;color:#fff;border:none;font-size:15px;font-weight:500;
}
</style>
</head>
<body>
<!-- è®°è´¦ -->
<div id="page1" class="page active">
  <div class="header">
    <img class="header-img" src="https://picsum.photos/id/63/200/200">
    <div class="header-text">
      <h2>ç®€çº¦è®°è´¦</h2>
      <p>æ—¥å¸¸æ”¶æ”¯è®°å½•</p>
    </div>
  </div>
  <div class="total-row">
    <div class="total-box">
      <p>æ€»æ”¶å…¥</p>
      <div class="num income" id="inTotal">0.00</div>
    </div>
    <div class="total-box">
      <p>æ€»æ”¯å‡º</p>
      <div class="num expense" id="outTotal">0.00</div>
    </div>
  </div>
  <div class="card">
    <div class="card-title">å¿«é€Ÿè®°è´¦</div>
    <input id="money" type="number" placeholder="é‡‘é¢">
    <input id="title" placeholder="å¤‡æ³¨ï¼ˆé¤é¥®ã€å·¥èµ„ç­‰ï¼‰">
    <div class="flex">
      <button class="btn btn-green" onclick="saveIn()">æ”¶å…¥</button>
      <button class="btn btn-red" onclick="saveOut()">æ”¯å‡º</button>
    </div>
  </div>
  <div class="card">
    <div class="card-title">å…¨éƒ¨è®°å½•</div>
    <div id="list"></div>
  </div>
</div>
<!-- æ—¥å† -->
<div id="page2" class="page">
  <div class="header">
    <img class="header-img" src="https://picsum.photos/id/63/200/200">
    <div class="header-text">
      <h2>æ—¥å†</h2>
      <p>æ¯æ—¥æ”¶æ”¯ç»Ÿè®¡</p>
    </div>
  </div>
  <div class="card">
    <div class="calendar-header">
      <button onclick="prevMonth()">â€¹</button>
      <div class="card-title" id="calendarMonth">2025å¹´0æœˆ</div>
      <button onclick="nextMonth()">â€º</button>
    </div>
    <div class="week-bar">
      <div>æ—¥</div><div>ä¸€</div><div>äºŒ</div><div>ä¸‰</div><div>å››</div><div>äº”</div><div>å…­</div>
    </div>
    <div class="calendar" id="calendar"></div>
  </div>
  <div class="card">
    <div class="card-title">ä»Šæ—¥æ˜ç»†</div>
    <div id="todayDetail"></div>
  </div>
</div>
<!-- æˆ‘çš„ -->
<div id="page3" class="page">
  <div class="header">
    <img class="header-img" src="https://picsum.photos/id/63/200/200">
    <div class="header-text">
      <h2>æˆ‘çš„ä¸­å¿ƒ</h2>
      <p>æ•°æ®ä¸å®¢æœ</p>
    </div>
  </div>
  <div class="card">
    <div class="card-title">å†å²è®°å½•</div>
    <div id="historyList"></div>
  </div>
  <div class="card">
    <div class="card-title">æ•°æ®ç®¡ç†</div>
    <button class="btn btn-red" onclick="clearAll()">æ¸…ç©ºæ‰€æœ‰è®°å½•</button>
  </div>
  <div class="card">
    <div class="card-title">è”ç³»å®¢æœ</div>
    <p style="text-align:center;margin-bottom:12px">å®¢æœQQï¼š<b>67796535</b></p>
    <button class="btn btn-orange" onclick="copyQQ()">å¤åˆ¶QQå·</button>
  </div>
  <!-- ğŸ‘‡ å…³äºAPP æ”¾åœ¨è¿™é‡Œï¼ˆè”ç³»å®¢æœä¸‹æ–¹ï¼‰ -->
  <div class="card">
    <button class="btn btn-blue" onclick="showAbout()">å…³äºAPP</button>
  </div>
</div>
<!-- å…³äºAPP å¼¹çª— -->
<div class="modal" id="aboutModal">
  <div class="modal-box">
    <div class="modal-title">å…³äºAPP</div>
    <div class="modal-content">
      <div>â€¢ ç®€æ´æ¸…çˆ½çš„ä¸ªäººè®°è´¦å·¥å…·</div>
      <div>â€¢ å¿«é€Ÿè®°å½•æ”¶å…¥ä¸æ”¯å‡º</div>
      <div>â€¢ æ—¥å†è§†å›¾ï¼Œæ—¥æœŸè‡ªç”±æŸ¥çœ‹</div>
      <div>â€¢ æ•°æ®æœ¬åœ°ä¿å­˜ï¼Œå®‰å…¨ä¸ä¸¢å¤±</div>
      <div>â€¢ æ”¯æŒåˆ é™¤ã€æ¸…ç©ºå…¨éƒ¨è®°å½•</div>
      <div>â€¢ æ— å¹¿å‘Šï¼Œçº¯å‡€ä½¿ç”¨ä½“éªŒ</div>
    </div>
    <button class="modal-btn" onclick="closeAbout()">ç¡®å®š</button>
  </div>
</div>
<div class="tab">
  <div class="tab-item active" onclick="go(1)">
    <div class="icon">ğŸ’°</div>
    <div>è®°è´¦</div>
  </div>
  <div class="tab-item" onclick="go(2)">
    <div class="icon">ğŸ—“ï¸</div>
    <div>æ—¥å†</div>
  </div>
  <div class="tab-item" onclick="go(3)">
    <div class="icon">ğŸ‘¤</div>
    <div>æˆ‘çš„</div>
  </div>
</div>
<script>
let now = new Date();
let currentYear = now.getFullYear();
let currentMonth = now.getMonth();
function showAbout(){
  document.getElementById('aboutModal').classList.add('show')
}
function closeAbout(){
  document.getElementById('aboutModal').classList.remove('show')
}
function go(index){
  document.querySelectorAll('.page').forEach(p=>p.classList.remove('active'))
  document.querySelectorAll('.tab-item').forEach(t=>t.classList.remove('active'))
  document.getElementById('page'+index).classList.add('active')
  if(index===3) loadHistory()
  if(index===2) buildCalendar()
}
function getDateStr(d){
  return d.getFullYear() + "-" + String(d.getMonth()+1).padStart(2,'0') + "-" + String(d.getDate()).padStart(2,'0');
}
let todayStr = getDateStr(now);
function getData(){
  let list = JSON.parse(localStorage.getItem('bill')||'[]');
  let inTotal=0, outTotal=0;
  list.forEach(v=>{
    if(v.t==='in') inTotal += v.m;
    else outTotal += v.m;
  })
  return {list,inTotal,outTotal};
}
function load(){
  let {list,inTotal,outTotal} = getData();
  document.getElementById('inTotal').innerText = inTotal.toFixed(2);
  document.getElementById('outTotal').innerText = outTotal.toFixed(2);
  let html = '';
  list.forEach((v,i)=>{
    html+=`
    <div class="item">
      <div class="name">${v.n}</div>
      <div style="display:flex;align-items:center;gap:8px">
        <div class="${v.t==='in'?'income':'expense'}">${v.t==='in'?'+':'-'}${v.m.toFixed(2)}</div>
        <button class="del" onclick="del(${i})">åˆ </button>
      </div>
    </div>`;
  })
  document.getElementById('list').innerHTML = html || '<div class="empty">æš‚æ— è®°å½•</div>';
}
function loadHistory(){
  let {list} = getData();
  let html = '';
  list.forEach(v=>{
    html+=`
    <div class="item">
      <div class="name">${v.n}</div>
      <div class="${v.t==='in'?'income':'expense'}">${v.t==='in'?'+':'-'}${v.m.toFixed(2)}</div>
    </div>`;
  })
  document.getElementById('historyList').innerHTML = html || '<div class="empty">æš‚æ— è®°å½•</div>';
}
function saveIn(){
  let m = parseFloat(document.getElementById('money').value);
  let n = document.getElementById('title').value.trim();
  if(!m || m<=0 || !n) return alert('è¯·å¡«å†™å®Œæ•´');
  let list = JSON.parse(localStorage.getItem('bill')||'[]');
  list.unshift({t:'in', m, n, date:todayStr});
  localStorage.setItem('bill',JSON.stringify(list));
  document.getElementById('money').value = '';
  document.getElementById('title').value = '';
  load();
}
function saveOut(){
  let m = parseFloat(document.getElementById('money').value);
  let n = document.getElementById('title').value.trim();
  if(!m || m<=0 || !n) return alert('è¯·å¡«å†™å®Œæ•´');
  let list = JSON.parse(localStorage.getItem('bill')||'[]');
  list.unshift({t:'out', m, n, date:todayStr});
  localStorage.setItem('bill',JSON.stringify(list));
  document.getElementById('money').value = '';
  document.getElementById('title').value = '';
  load();
}
function del(i){
  let list = getData().list;
  list.splice(i,1);
  localStorage.setItem('bill',JSON.stringify(list));
  load();
}
function clearAll(){
  if(!confirm('ç¡®å®šæ¸…ç©ºæ‰€æœ‰è®°å½•ï¼Ÿ')) return;
  localStorage.setItem('bill','[]');
  load();
  loadHistory();
  buildCalendar();
}
function copyQQ(){
  navigator.clipboard.writeText('67796535').then(()=>{
    alert('å¤åˆ¶æˆåŠŸï¼š67796535');
  })
}
function prevMonth(){
  currentMonth--;
  if(currentMonth < 0){ currentMonth = 11; currentYear--; }
  buildCalendar();
}
function nextMonth(){
  currentMonth++;
  if(currentMonth > 11){ currentMonth = 0; currentYear++; }
  buildCalendar();
}
function buildCalendar(){
  let firstDay = new Date(currentYear, currentMonth, 1).getDay();
  let daysInMonth = new Date(currentYear, currentMonth+1, 0).getDate();
  document.getElementById('calendarMonth').innerText = `${currentYear}å¹´${currentMonth+1}æœˆ`;
  let all = getData().list;
  let html = '';
  for(let i=0; i<firstDay; i++) html += '<div></div>';
  for(let d=1; d<=daysInMonth; d++){
    let dateStr = `${currentYear}-${String(currentMonth+1).padStart(2,0)}-${String(d).padStart(2,0)}`;
    let dayList = all.filter(v => v.date === dateStr);
    let inSum = 0, outSum = 0;
    dayList.forEach(v => {
      if(v.t==='in') inSum += v.m;
      else outSum += v.m;
    })
    let isToday = (dateStr === todayStr);
    html += `
    <div class="calendar-day ${isToday?'today':''}">
      <div>${d}</div>
      ${inSum>0 ? `<div class="in">+${inSum.toFixed(0)}</div>` : ''}
      ${outSum>0 ? `<div class="out">${-outSum.toFixed(0)}</div>` : ''}
    </div>`;
  }
  document.getElementById('calendar').innerHTML = html;
  let todayList = all.filter(v => v.date === todayStr);
  let td = '';
  todayList.forEach(v => {
    td += `
    <div class="item">
      <div class="name">${v.n}</div>
      <div class="${v.t==='in'?'income':'expense'}">${v.t==='in'?'+':'-'}${v.m.toFixed(2)}</div>
    </div>`
  })
  document.getElementById('todayDetail').innerHTML = td || '<div class="empty">ä»Šæ—¥æ— è®°å½•</div>';
}
load();
</script>
</body>
</html>
